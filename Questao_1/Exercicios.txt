Strategy

Adapter

State

Chain

QUESTÃO 1 Nota: 0,5: 
Contexto: Você está desenvolvendo um sistema de processamento de dados para uma empresa financeira que lida com diferentes tipos de análise de risco. O sistema precisa calcular métricas de risco usando diferentes algoritmos (Value at Risk, Expected Shortfall, Stress Testing) que podem mudar dinamicamente durante a execução.

Problema:

- Cada algoritmo de risco deve ser intercambiável em tempo de execução

- Os algoritmos devem ser capazes de compartilhar um contexto complexo com múltiplos parâmetros financeiros

- Deve ser possível trocar de algoritmo de acordo com a necessidade de negócios

Restrições:

- O cliente deve poder mudar de algoritmo sem conhecer os detalhes de implementação

- Implemente pelo menos 3 algoritmos diferentes com cálculos dummy (podem ser mensagens de texto) distintos

    RESOLUÇÃO:
Padrão Strategy:
- Deve ser possível trocar de estratégia sem parar o algoritmo
- A primeira restrição diz que é necessário uma interface (estratégia) que será acessada pelos algoritmos
- Lembrar de mudar o contexto durante a execução do algoritmo
- 3 algoritmos diferentes
- Perguntar Escobar: posso usar os mesmos parâmetros para os algoritmos? 

Arquivos:
- Interface Strategy: contém a estratégia dos algorismos 
- Classe dos 3 algoritmos: herdam a interface Strategy
- Classe Context: vai usar a referência da interface Strategy, acessa ela



QUESTÃO 2 (0,5):
Contexto: Sua empresa está integrando com um legado bancário que possui uma interface complexa para processamento de transações. A interface legada `SistemaBancarioLegado` possui métodos com assinaturas incompatíveis e usa tipos de dados obsoletos.

Problema:

- Converter a interface atualizada ProcessadorTransacoes (com métodos autorizar(String cartao, double valor, String moeda)) para a interface legada

- O sistema legado usa: processarTransacao(HashMap<String, Object> parametros)

- Implemente de forma que o funcionamento seja bidirecional, ou seja, que também permita converter respostas do legado para o formato atualizado

- Adicione tratamento para campos obrigatórios do legado que não existem na interface moderna (ao menos um)

Adapter

Restrições:

- O legado exige codificação específica para moedas (USD=1, EUR=2, BRL=3)

    RESOLUÇÃO 
Padrão Adapter
- Adapter usa uma classe legada (API, etc) e uam classe adapter para cada classe legada, ou seja, terão transações Pix, Cartao, Boleto, etc e uma adapter PixAdapter, CartaoAdapter, BoletoAdapter que serão acessados por uma interface ProcessaarPagamento 


QUESTÃO 3 (0,25):
Contexto: Você está modelando um sistema de controle para uma usina nuclear com estados complexos de operação. A usina pode estar em: DESLIGADA, OPERACAO_NORMAL, ALERTA_AMARELO, ALERTA_VERMELHO, EMERGENCIA.

Problema:

- Cada transição de estado deve validar condições complexas (temperatura, pressão, nível de radiação)

- Algumas transições são bidirecionais, outras são unidirecionais

- Previna transições circulares perigosas

- O estado EMERGENCIA só pode ser ativado após passar por ALERTA_VERMELHO

- Adicione um modo "manutenção" que sobreescreva temporariamente os estados normais

State

Regras:

- OPERACAO_NORMAL → ALERTA_AMARELO: se temperatura > 300°C

- ALERTA_AMARELO → ALERTA_VERMELHO: se temperatura > 400°C por mais de 30 segundos

- ALERTA_VERMELHO → EMERGENCIA: se sistema de resfriamento falhar



QUESTÃO 4 (0,25):
Contexto: Desenvolva um sistema de validação de documentos fiscais eletrônicos (NF-e) que precisa aplicar múltiplas regras de validação em cadeia.

Problema:

- Cada validador especializado verifica um aspecto específico do documento

- A cadeia deve suportar validações condicionais (se validador X falhar, pule Y)

- Implemente um mecanismo de "circuit breaker" que interrompa a cadeia após 3 validações falharem

- Adicione capacidade de rollback para validadores que modificam o documento



Validadores Requeridos:

1. Validador de Schema XML contra XSD

2. Validador de Certificado Digital (expiração e revogação)

3. Validador de Regras Fiscais (cálculo de impostos)

4. Validador de Banco de dados (duplicidade de número)

5. Validador de Serviço SEFAZ (consulta online)



Restrições:

- Os validadores 3 e 5 devem ser executados apenas se os anteriores passarem

- O validador 4 deve fazer rollback da inserção se validações subsequentes falharem

- Implemente timeout individual para cada validador

Chain